jQuery(function($){function e(e,a){for(var t=new google.maps.MarkerImage(DI.templateUri+"/img/imap/icons/house-icon-2.png",new google.maps.Size(20,32),new google.maps.Point(0,0),new google.maps.Point(5,20)),n=new google.maps.MarkerImage(DI.templateUri+"/img/imap/icons/lot-icon-2.png",new google.maps.Size(20,32),new google.maps.Point(0,0),new google.maps.Point(5,20)),i,s={coord:[1,1,1,32,20,32,20,1],type:"poly"},r=[],l=0;l<a.length;l++){var m=a[l],p=m[0],d=m[3],c=m[4],v=m[5],w=m[6];if(m[1]&&m[2]){var u=new google.maps.LatLng(m[1],m[2]);if(0!=w)var h=t;else var h=n;var f=o(e,u,h,i,p,d,c,v);r.push(f)}else g.geocode({address:m[0]},function(a,s){if(s==google.maps.GeocoderStatus.OK){if(w)var g=t;else var g=n;var l=o(e,a[0].geometry.location,g,i,p,d,c,v);r.push(l)}else alert("Geocode was not successful for the following reason: "+s)})}return r}function o(e,o,a,t,n,i,s,r){var g=r,m=new google.maps.Marker({position:o,map:e,icon:a,zIndex:99999,clickable:!0});return google.maps.event.addListener(m,"click",function(){l.setContent(g),l.open(e,m)}),m}function a(o){var a={zoom:t,center:new google.maps.LatLng(33.055457,-80.103917),navigationControl:!0,mapTypeControl:!1,scaleControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("imap"),a);i.overlayMapTypes.insertAt(0,s),overlay=new google.maps.OverlayView,overlay.draw=function(){},overlay.setMap(i),google.maps.event.addListener(i,"zoom_changed",function(){i.getZoom()<t&&i.setZoom(t),i.getZoom()>n&&i.setZoom(n)});var r=e(i,o);$("#modal-view-on-map").on("shown.bs.modal",function(){google.maps.event.trigger(i,"resize"),1===o.length?(i.setCenter(new google.maps.LatLng(o[0][1],o[0][2])),1===r.length&&google.maps.event.trigger(r[0],"click")):i.setCenter(new google.maps.LatLng(33.055457,-80.103917))})}$("#modal-view-on-map").on("hidden.bs.modal",function(e){$("#imap").empty()}),$("#modal-view-on-map").on("show.bs.modal",function(e){var o=$("div.modal");$.each(o,function(e,o){($(o).data("bs.modal")||{}).isShown===!0&&$(o).modal("hide")})}),$(document).on("click","#viewListingsOnMap, a.viewIMap",function(){var e=$("#modal-view-on-map");return"undefined"!=typeof(e.data("bs.modal")||{}).isShown&&(e.data("bs.modal")||{}).isShown!==!1?!1:(e.modal("show"),a(locations),!1)}),$(document).on("click","#viewOnMap",function(){var e=$("#modal-view-on-map"),o=$(this).attr("data-latitude"),t=$(this).attr("data-longitude"),n=$(this).attr("data-address"),i=$(this).attr("data-link"),s=$(this).attr("data-property-type"),r=$(this).attr("data-tool-tip");return"Homesite"===s&&(s=0),"undefined"!=typeof(e.data("bs.modal")||{}).isShown&&(e.data("bs.modal")||{}).isShown!==!1?!1:(e.modal("show"),void a([[n,o,t,"4",i,r,s]]))}),$(document).on("click","a.showProperty",function(){var e=$(this).attr("data-property-id"),o=$(this).attr("data-property-address");return $("div.listing.active").removeClass("active"),$('div.listing[data-property-id="'+e+'"]').addClass("active"),router.navigate("home-finder/properties/"+o+"/"+e+"/",{trigger:!0}),$("#modal-view-on-map").modal("hide"),!1});var t=17,n=19,i={getTileUrl:function(e,o){var a=1<<o,t=a-e.y-1;return url=DI.templateUri+"/img/imap/tiles/"+o+"/"+e.x+"/"+t+".png",url},tileSize:new google.maps.Size(256,256),isPng:!0},s=new google.maps.ImageMapType(i),r=new google.maps.LatLngBounds,g=new google.maps.Geocoder;r.extend(new google.maps.LatLng(32.83064187300698,-79.93316068560326)),r.extend(new google.maps.LatLng(32.89325262945007,-79.88402077618287));var l=new google.maps.InfoWindow({size:new google.maps.Size(150,50)})});