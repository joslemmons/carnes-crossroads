function setMarkerColor(e){var o=null;switch(e){case"community_amenity":o="#56c1b1";break;case"neighborhood":o="#536377";break;case"park_lake":o="#695e49";break;case"town":o="#bf7616";break;case"real_estate":o="#aa0979"}return o}function change(){for(var e=[],o=0;o<checkboxes.length;o++)checkboxes[o].childNodes[1].checked&&e.push(checkboxes[o].childNodes[1].name);return layer.setFilter(function(o){return e.indexOf(o.properties["listing-type"])!==-1}),!1}L.mapbox.accessToken="pk.eyJ1IjoiZGlkZXZjbyIsImEiOiJjaXM3cWY3NDEwNDc0Mnpwa2w5YnllMXZkIn0.4pWeAL6-vhtobhpFd2HDuA",map=L.mapbox.map("imap","mapbox.streets",{maxZoom:18,minZoom:15,scrollWheelZoom:"center"}).setView([33.0565,-80.103917]);for(var filters=document.getElementById("legend-items"),checkboxes=document.getElementsByClassName("squared-checkbox"),layer=L.mapbox.featureLayer().addTo(map),stamenLayer=L.tileLayer(DI.templateUri+"/img/imap/tiles/{z}/{x}/{y}.png",{minZoom:14,maxZoom:19}).addTo(map),geoJson={type:"FeatureCollection",features:[]},i=0;i<locations.length;i++)geoJson.features.push({type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(locations[i][3]),parseFloat(locations[i][2])]},properties:{"listing-type":locations[i][4],"marker-color":setMarkerColor(locations[i][4]),"pop-up":locations[i][5]}});layer.setGeoJSON(geoJson),layer.on("click",function(e){if(e.layer)var o=L.popup().setLatLng(e.latlng).setContent(e.layer.feature.properties["pop-up"]).openOn(map)}),map.setZoom(18),filters.onchange=change,change(),jQuery(function($){$(".legend-title").click(function(){$(".legend-title").toggleClass("close"),$("#legend-items").slideToggle("slow",function(){})})});